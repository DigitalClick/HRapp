
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
    <link rel="apple-touch-startup-image" href="images/apple-touch-startup-image-320x460.png" />
    <title>Digital You</title>
    <link rel="stylesheet" href="css/framework7.css">
    <link rel="stylesheet" href="style.css">
    <link type="text/css" rel="stylesheet" href="css/swipebox.css" />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700,900' rel='stylesheet' type='text/css'>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="js/Chart.js"></script>
    <script type="text/javascript">

        var serviceUrl = "https://cmtindiaonline.accenture.com/TestMobile/api/MobileWebServices/";
        var message = {
            header: null,
            body: null
        };
        var reqMessage = { message: null };
        function LoadMonth() {
            message.header = {
                appVersion: null,
                authToken: null,
                deviceType: null,
                osName: null,
                phoneModel: null,
                imei: "123456789",
                responseMessage: null,
                responseCode: 0,
                sessionId: "",
                timeStamp: null,
                timeZone: null
            };
            reqMessage.message = message;
            //alert(2);
            $.ajax({
                url: serviceUrl + 'GetMonths',
                type: 'Post',
                dataType: 'json',
                data: JSON.stringify(reqMessage),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#month").empty();
                    $("#week").empty();
                    $.each(data.message.body, function () {
                        $("#month").append($("<option/>").val(this).text(this));
                    });
                },
                error: function (request, status, error) {
                    //alert(1);
                    //alert(request.responseText);
                }

            });
        }

        LoadMonth();
        function LoadWeek(drpMoth) {
            message.header = {
                appVersion: null,
                authToken: null,
                deviceType: null,
                osName: null,
                phoneModel: null,
                imei: "123456789",
                responseMessage: null,
                responseCode: 0,
                sessionId: "",
                timeStamp: null,
                timeZone: null
            };
            message.body = {
                MthYear: drpMoth.value
            };
            reqMessage.message = message;
            $.ajax({
                url: serviceUrl + 'GetWeeks',
                type: 'Post',
                dataType: 'json',
                data: JSON.stringify(reqMessage),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#week").empty();
                    $.each(data.message.body, function () {
                        $("#week").append($("<option/>").val(this.WeekID).text(this.WeekRange));
                    });
                },
                error: function (data) {
                    alert(data.message.header.responseMessage);
                }
            });
        }

        function LoadGrid() {
            message.header = {
                appVersion: null,
                authToken: null,
                deviceType: null,
                osName: null,
                phoneModel: null,
                imei: "123456789",
                responseMessage: null,
                responseCode: 0,
                sessionId: "",
                timeStamp: null,
                timeZone: null
            };
            message.body = {
                MthYear: $("#week").val(),
                IG: "CMT"
            };
            reqMessage.message = message;
            $("#gridView").empty();
            $.ajax({
                url: serviceUrl + 'GetProjectOverallStatus',
                type: 'Post',
                dataType: 'json',
                data: JSON.stringify(reqMessage),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    var divData;
                    divData = "<div>Count</div><div>Status</div>";
                    $.each(data.message.body, function () {
                        divData = divData + "<div>" + this.count + "</div><div>" + this.status + "</div>";
                    });
                    $("#gridView").append(divData);


                    var pieData = [
                    {
                        value: 300,
                        color: "#F7464A",
                        highlight: "#FF5A5E",
                        label: "Red"
                    },
                    {
                        value: 50,
                        color: "#46BFBD",
                        highlight: "#5AD3D1",
                        label: "Green"
                    },
                    {
                        value: 100,
                        color: "#FDB45C",
                        highlight: "#FFC870",
                        label: "Yellow"
                    },
                    {
                        value: 40,
                        color: "#949FB1",
                        highlight: "#A8B3C5",
                        label: "Grey"
                    },
                    {
                        value: 120,
                        color: "#4D5360",
                        highlight: "#616774",
                        label: "Dark Grey"
                    }

                    ];

                    var ctx = document.getElementById("chart-area").getContext("2d");
                    window.myPie = new Chart(ctx).Pie(pieData);

                },
                error: function (data) {
                    alert(data.message.header.responseMessage);
                }
            });
        }
        function Loadurl(url) {

            window.location.replace(url);
        }

    </script>

</head>
<body id="mobile_wrap">
    <div class="statusbar-overlay"></div>

    <div class="panel-overlay"></div>

    <div class="panel panel-left panel-cover">
        <nav class="list-nav-small">
            <ul>
                <li class="home-icon-small"><a href="index.html" class="close-panel">Home</a></li>
                <li class="about-icon-small"><a href="about.html" class="close-panel">About</a></li>
                <li class="features-icon-small"><a href="features.html" class="close-panel">Features</a></li>
                <li class="photos-icon-small"><a href="photos.html" class="close-panel">Gallery</a></li>
                <li class="video-icon-small"><a href="videos.html" class="close-panel">Videos</a></li>
                <li class="blog-icon-small"><a href="blog.html" class="close-panel">Blog</a></li>
                <li class="contact-icon-small"><a href="contact.html" class="close-panel">Contact</a></li>
                <li class="dashboard-icon-small"><a href="#" onclick="Loadurl('Dashboard.html')" class="close-panel">Dashboard</a></li>
            </ul>
        </nav>
    </div>


    <div class="views">

        <div class="view view-main">


            <div class="pages">
                <div data-page="projects" class="page no-toolbar no-navbar">
                    <div class="page-content">
                        <div class="navbarpages">
                            <div class="navbar_home_link"><a href="index.html"><img src="images/icons/white/home.png" alt="" title="" /></a></div>
                            <div class="navbar_page_center">Dashboard</div>
                            <div class="menu_open_icon_white"><a href="#" class="open-panel"><img src="images/menu_open.png" alt="" title="" /></a></div>
                        </div>
                        <div id="pages_maincontent">
                            <select id="month" onchange="LoadWeek(this)"></select>
                            <select id="week" onchange="LoadGrid()"></select>
                            <div id="gridView">
                            </div>
                            <div id="canvas-holder">
                                <canvas id="chart-area" width="300" height="300" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
    <script src="js/jquery.validate.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery.swipebox.js"></script>
    <script type="text/javascript" src="js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="js/email.js"></script>
    <script type="text/javascript" src="js/framework7.min.js"></script>
    <script type="text/javascript" src="js/my-app.js"></script>

</body>
</html>